server {
        include /etc/nginx/env.conf;
        include /etc/nginx/proxy_env.conf;

        listen 80;
        server_name mapi-global-ci.garbarino.com mapi-global-staging.garbarino.com mapi-global.garbarino.com;

        set $webstore $http_x_brand;

        include /etc/nginx/includes/headers;

        location /api {
            proxy_pass $mapi_core_us;
        }

        location /banners {
            proxy_pass $mapi_core_us;
        }

        location /list_banners {
            proxy_pass $mapi_core_us;
        }

        location /categories {
            proxy_pass $mapi_core_us;
        }

        location /homes {
            proxy_pass $mapi_core_us;
        }

        location /products {
            proxy_pass $mapi_core_us;
        }

        location /tags {
            proxy_pass $mapi_core_us;
        }

     	location /discounts {
            proxy_pass $mapi_core_us;
        }

        location /cache {
            proxy_pass $mapi_core_us;
        }

        location /landing_lists {
            proxy_pass $mapi_core_us;
        }

        location /configs {
            proxy_pass $mapi_core_us;
        }

        location /autocomplete {
            proxy_pass $mapi_core_us;
        }

        location /qr_code {
            proxy_pass $mapi_core_us;
        }

        location /cart {
            proxy_pass $mapi_core_us;
        }

        location /scratch {
            proxy_pass $mapi_core_us;
        }

        location /price_alerts {
            proxy_pass $mapi_core_us;
        }

        location /images {
            proxy_pass $mapi_core_us;
        }

        location /users {
            proxy_pass $mapi_core_us;
        }

        location /me {
            proxy_pass $mapi_core_us;
        }

        location /sessions {
            proxy_pass $mapi_core_us;
        }

        location /coupons {
            proxy_pass $mapi_core_us;
        }

        location /menu_items {
            proxy_pass $mapi_core_us;
        }

        location /statics {
            proxy_pass $mapi_core_us;
        }

        location /surveys {
            proxy_pass $mapi_core_us;
        }

        location /scoring {
            proxy_pass $mapi_core_us;
        }

        location /notifications {
            proxy_pass $mapi_notifications_us;
        }

        location /installations {
            proxy_pass $mapi_notifications_us;
        }

        location /failure_installations {
            proxy_pass $mapi_notifications_us;
        }

        location /geofences {
            proxy_pass $mapi_notifications_us;
        }

        location /geofence_sent_actions {
            proxy_pass $mapi_notifications_us;
        }

        location /geofence_actions {
            proxy_pass $mapi_notifications_us;
        }

        location /insurances {
            proxy_pass $mapi_newbiz_us;
        }

        location /me/ards {
            proxy_pass $mapi_newbiz_us;
        }

        location /admin {
	       include /etc/nginx/security/*-ips.conf;

            deny all;
            proxy_pass $mapi_admin_us;
        }


}

server {
        include /etc/nginx/env.conf;
        include /etc/nginx/proxy_env.conf;

        listen 80;
        server_name mapi-ci.garbarino.com mapi-staging.garbarino.com mapi.garbarino.com;
        set $webstore garbarino;

        include /etc/nginx/includes/headers;

        location /teapot {
            return 418 "I'm a teapot";
        }

        location /api {
            proxy_pass $mapi_core_us;
        }

        location /banners {
            proxy_pass $mapi_core_us;
        }

        location /list_banners {
            proxy_pass $mapi_core_us;
        }

        location /categories {
            proxy_pass $mapi_core_us;
        }

        location /homes {
            proxy_pass $mapi_core_us;
        }

        location /products {
            proxy_pass $mapi_core_us;
        }

        location /tags {
            proxy_pass $mapi_core_us;
        }

        location /discounts {
            proxy_pass $mapi_core_us;
        }

        location /cache {
            proxy_pass $mapi_core_us;
        }

        location /landing_lists {
            proxy_pass $mapi_core_us;
        }

        location /configs {
            proxy_pass $mapi_core_us;
        }

        location /autocomplete {
            proxy_pass $mapi_core_us;
        }

        location /qr_code {
        	proxy_pass $mapi_core_us;
        }

        location /cart {
            proxy_pass $mapi_core_us;
        }

        location /scratch {
            proxy_pass $mapi_core_us;
        }

        location /price_alerts {
            proxy_pass $mapi_core_us;
        }

        location /images {
            proxy_pass $mapi_core_us;
        }

        location /users {
            proxy_pass $mapi_core_us;
        }

        location /me {
            proxy_pass $mapi_core_us;
        }

        location /sessions {
            proxy_pass $mapi_core_us;
        }

        location /coupons {
            proxy_pass $mapi_core_us;
        }

        location /menu_items {
            proxy_pass $mapi_core_us;
        }

        location /statics {
            proxy_pass $mapi_core_us;
        }

        location /surveys {
            proxy_pass $mapi_core_us;
        }

        location /scoring {
            proxy_pass $mapi_core_us;
        }

        location /notifications {
            proxy_pass $mapi_notifications_us;
        }

        location /geofences {
            proxy_pass $mapi_notifications_us;
        }

        location /geofence_sent_actions {
            proxy_pass $mapi_notifications_us;
        }

        location /geofence_actions {
            proxy_pass $mapi_notifications_us;
        }

        location /installations {
            proxy_pass $mapi_notifications_us;
        }

        location /failure_installations {
            proxy_pass $mapi_notifications_us;
        }

        location /insurances {
            proxy_pass $mapi_newbiz_us;
        }

        location /me/credit_cards {
            proxy_pass $mapi_newbiz_us;
        }

        location /me/credit {
            proxy_pass $mapi_newbiz_us;
        }

        location /admin {
	          include /etc/nginx/security/*-ips.conf;

            deny all;
            proxy_pass $mapi_admin_us;
        }
}

server {
        include /etc/nginx/env.conf;
        include /etc/nginx/proxy_env.conf;

        listen 80;
        server_name mapi-ci.compumundo.com mapi-staging.compumundo.com mapi.compumundo.com;
        set $webstore compumundo;

        include /etc/nginx/includes/headers;

        location /api {
            proxy_pass $mapi_core_us;
        }

        location /banners {
            proxy_pass $mapi_core_us;
        }

        location /list_banners {
            proxy_pass $mapi_core_us;
        }

        location /categories {
            proxy_pass $mapi_core_us;
        }

        location /homes {
            proxy_pass $mapi_core_us;
        }

        location /products {
            proxy_pass $mapi_core_us;
        }

        location /tags {
            proxy_pass $mapi_core_us;
        }

        location /discounts {
            proxy_pass $mapi_core_us;
        }

        location /cache {
            proxy_pass $mapi_core_us;
        }

        location /landing_lists {
            proxy_pass $mapi_core_us;
        }

        location /configs {
            proxy_pass $mapi_core_us;
        }

        location /autocomplete {
            proxy_pass $mapi_core_us;
        }

        location /qr_code {
            proxy_pass $mapi_core_us;
        }

        location /cart {
            proxy_pass $mapi_core_us;
        }

        location /scratch {
            proxy_pass $mapi_core_us;
        }

        location /price_alerts {
            proxy_pass $mapi_core_us;
        }

        location /images {
            proxy_pass $mapi_core_us;
        }

        location /users {
            proxy_pass $mapi_core_us;
        }

        location /me {
            proxy_pass $mapi_core_us;
        }

        location /sessions {
            proxy_pass $mapi_core_us;
        }

        location /coupons {
            proxy_pass $mapi_core_us;
        }

        location /menu_items {
            proxy_pass $mapi_core_us;
        }

        location /statics {
            proxy_pass $mapi_core_us;
        }

        location /surveys {
            proxy_pass $mapi_core_us;
        }

        location /scoring {
            proxy_pass $mapi_core_us;
        }

        location /notifications {
            proxy_pass $mapi_notifications_us;
        }

        location /geofences {
            proxy_pass $mapi_notifications_us;
        }

        location /geofence_sent_actions {
            proxy_pass $mapi_notifications_us;
        }

        location /geofence_actions {
            proxy_pass $mapi_notifications_us;
        }

        location /installations {
            proxy_pass $mapi_notifications_us;
        }

        location /failure_installations {
            proxy_pass $mapi_notifications_us;
        }

        location /insurances {
            proxy_pass $mapi_newbiz_us;
        }

        location /admin {
	    		include /etc/nginx/security/*-ips.conf;

            deny all;
            proxy_pass $mapi_admin_us;
        }
}

server {
        include /etc/nginx/env.conf;
        include /etc/nginx/proxy_env.conf;

        listen 80;
        server_name mapi-ci.ipoint.com.ar mapi-staging.ipoint.com.ar mapi.ipoint.com.ar;
        set $webstore ipoint;

        include /etc/nginx/includes/headers;

        location /api {
            proxy_pass $mapi_core_us;
        }

        location /banners {
            proxy_pass $mapi_core_us;
        }

        location /list_banners {
            proxy_pass $mapi_core_us;
        }

        location /categories {
            proxy_pass $mapi_core_us;
        }

        location /homes {
            proxy_pass $mapi_core_us;
        }

        location /products {
            proxy_pass $mapi_core_us;
        }

        location /tags {
            proxy_pass $mapi_core_us;
        }

        location /discounts {
            proxy_pass $mapi_core_us;
        }

        location /cache {
            proxy_pass $mapi_core_us;
        }

        location /landing_lists {
            proxy_pass $mapi_core_us;
        }

        location /configs {
            proxy_pass $mapi_core_us;
        }

        location /autocomplete {
            proxy_pass $mapi_core_us;
        }

        location /qr_code {
            proxy_pass $mapi_core_us;
        }

        location /cart {
            proxy_pass $mapi_core_us;
        }

        location /scratch {
            proxy_pass $mapi_core_us;
        }

        location /price_alerts {
            proxy_pass $mapi_core_us;
        }

        location /images {
            proxy_pass $mapi_core_us;
        }

        location /users {
            proxy_pass $mapi_core_us;
        }

        location /me {
            proxy_pass $mapi_core_us;
        }

        location /sessions {
            proxy_pass $mapi_core_us;
        }

        location /coupons {
            proxy_pass $mapi_core_us;
        }

        location /menu_items {
            proxy_pass $mapi_core_us;
        }

        location /statics {
            proxy_pass $mapi_core_us;
        }

        location /surveys {
            proxy_pass $mapi_core_us;
        }

        location /scoring {
            proxy_pass $mapi_core_us;
        }

        location /notifications {
            proxy_pass $mapi_notifications_us;
        }

        location /geofences {
            proxy_pass $mapi_notifications_us;
        }

        location /geofence_sent_actions {
            proxy_pass $mapi_notifications_us;
        }

        location /geofence_actions {
            proxy_pass $mapi_notifications_us;
        }

        location /installations {
            proxy_pass $mapi_notifications_us;
        }

        location /failure_installations {
            proxy_pass $mapi_notifications_us;
        }

        location /insurances {
            proxy_pass $mapi_newbiz_us;
        }

        location /admin {
       	    include /etc/nginx/security/*-ips.conf;

            deny all;
	           proxy_pass $mapi_admin_us;
        }
}
